// Generated by CoffeeScript 1.8.0
var Follower, React, d3, helpers, r;

React = require('react');

d3 = require('d3');

helpers = require('./helpers');

r = 5;

module.exports = Follower = function(_arg) {
  var color, data, format, height, mouseX, mouseY, multi, width, x, xx, y;
  width = _arg.width, height = _arg.height, data = _arg.data, x = _arg.x, y = _arg.y, color = _arg.color, mouseX = _arg.mouseX, mouseY = _arg.mouseY, format = _arg.format, multi = _arg.multi;
  xx = x.invert(mouseX);
  if (!multi) {
    data = [data];
  }
  return React.createElement("svg", {
    "className": 'follower-container',
    "style": {
      width: width,
      height: height,
      position: 'absolute',
      top: 0,
      left: 0
    }
  }, React.createElement("rect", {
    "className": 'follower-line follower-vertical',
    "style": {
      width: 1,
      height: height,
      y: 0,
      x: mouseX
    }
  }), React.createElement("rect", {
    "className": 'follower-line follower-horizontal',
    "style": {
      width: width,
      height: 1,
      y: mouseY,
      x: 0
    }
  }), data.map(function(data, di) {
    var d, follower, value, yy, _i, _len;
    follower = {};
    yy = 0;
    for (_i = 0, _len = data.length; _i < _len; _i++) {
      d = data[_i];
      if (d.x > xx) {
        yy = d.y;
        break;
      }
    }
    value = yy;
    if (yy === 0) {
      return React.createElement("div", {
        "key": di
      });
    }
    return React.createElement("g", {
      "className": 'follower',
      "transform": "translate(" + mouseX + ", " + (y(yy)) + ")",
      "key": di
    }, React.createElement("circle", {
      "className": 'follower-dot',
      "r": r,
      "style": {
        fill: helpers.interpretColor(color, di)
      }
    }), React.createElement("text", {
      "className": 'follower-label',
      "y": 0.,
      "x": r + 5,
      "alignmentBaseline": 'middle'
    }, (format != null ? format(value) : value.toFixed(4))));
  }));
};
