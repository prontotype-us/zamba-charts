// Generated by CoffeeScript 1.8.0
var Chart, LabeledBarChart, React, d3;

React = require('react');

d3 = require('d3');

Chart = require('./chart');

module.exports = LabeledBarChart = React.createClass({
  mixins: [Chart],
  renderChart: function() {
    var axis_size, bar_padding, bar_width, data, height, num_bars, width, x, x_extent, y, _ref;
    _ref = this.props, width = _ref.width, height = _ref.height, data = _ref.data, x = _ref.x, y = _ref.y, bar_padding = _ref.bar_padding, axis_size = _ref.axis_size;
    num_bars = data.length;
    bar_padding || (bar_padding = 10);
    x_extent = d3.extent([0, width]);
    bar_width = Math.floor(width / num_bars - 1);
    y || (y = d3.scaleLinear().domain([
      0, d3.max(data, function(d) {
        return d.y;
      })
    ]).range([height, 0]));
    return React.createElement("svg", {
      "className": 'bar-chart',
      "style": {
        width: width,
        height: height,
        position: 'absolute'
      }
    }, data.map((function(_this) {
      return function(d, di) {
        return React.createElement("rect", {
          "key": di,
          "x": bar_width * di,
          "y": y(d.y),
          "width": bar_width - bar_padding,
          "height": height - y(d.y),
          "fill": d.color || _this.props.color,
          "onClick": typeof onClick !== "undefined" && onClick !== null ? onClick.bind(null, data[di]) : void 0
        });
      };
    })(this)));
  }
});
