// Generated by CoffeeScript 1.10.0
var LineChart, React, d3;

React = require('react');

d3 = require('d3');

module.exports = LineChart = React.createClass({displayName: "LineChart",
  getDefaultProps: function() {
    return {
      color: '#000',
      curve: true,
      fill: true
    };
  },
  shouldComponentUpdate: function(next_props, next_state) {
    if (next_props.data.length !== this.props.data.length) {
      return true;
    } else if ((next_props.width !== this.props.width) || (next_props.height !== this.props.height)) {
      return true;
    } else if ((next_props.y !== this.props.y) || (next_props.x !== this.props.x)) {
      return true;
    } else {
      return false;
    }
  },
  render: function() {
    var axis_size, curve, d, da, data, fill, height, line, ref, width, x, x_extent, y;
    ref = this.props, width = ref.width, height = ref.height, data = ref.data, x = ref.x, y = ref.y, curve = ref.curve, fill = ref.fill, axis_size = ref.axis_size;
    x_extent = d3.extent(data, function(d) {
      return d.x;
    });
    x || (x = d3.scaleLinear().domain(x_extent).range([0, width]));
    y || (y = d3.scaleLinear().domain([
      0, d3.max(data, function(d) {
        return d.y;
      })
    ]).range([height, 0]));
    line = d3.line().curve(curve ? d3.curveMonotoneX : d3.curveLinear).x(function(d) {
      return x(d.x);
    }).y(function(d) {
      return y(d.y);
    });
    d = line(data);
    return React.createElement("svg", {
      "className": 'line-chart',
      "style": {
        width: width,
        height: height,
        position: 'absolute',
        left: axis_size
      }
    }, (fill ? (da = line([
      {
        x: 0,
        y: 0
      }
    ].concat(data).concat([
      {
        x: x_extent[1],
        y: 0
      }
    ])), React.createElement("path", {
      "d": da,
      "fill": this.props.color,
      "opacity": 0.2,
      "stroke": 'none'
    })) : void 0), React.createElement("path", {
      "d": d,
      "fill": 'none',
      "stroke": this.props.color,
      "strokeWidth": 2
    }));
  }
});
